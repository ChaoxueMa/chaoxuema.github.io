(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{379:function(s,a,t){"use strict";t.r(a);var e=t(44),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"loaders"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#loaders"}},[s._v("#")]),s._v(" Loaders")]),s._v(" "),t("p",[s._v("官网链接："),t("a",{attrs:{href:"https://webpack.js.org/concepts/loaders/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://webpack.js.org/concepts/loaders/"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("这一章节讲述了 loaders 的配置方法")]),s._v(" "),t("h2",{attrs:{id:"一、一个简单的例子"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、一个简单的例子"}},[s._v("#")]),s._v(" 一、一个简单的例子")]),s._v(" "),t("p",[s._v("command-line 安装 css-loader 和 ts-loader")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -D css-loader ts-loader\n")])])]),t("p",[s._v("配置 webpack.config.js")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("module.exports = "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" /\\.css$/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'css-loader' "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" /\\.ts$/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'ts-loader' "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(";\n")])])]),t("p",[s._v("通过这种方式，webpack 能够使用 css-loader 作用到每个 "),t("code",[s._v(".css")]),s._v(" 文件，使用 ts-loader 作用到每个 "),t("code",[s._v(".ts")]),s._v(" 文件")]),s._v(" "),t("h2",{attrs:{id:"二、使用方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、使用方法"}},[s._v("#")]),s._v(" 二、使用方法")]),s._v(" "),t("p",[s._v("有两种方式使用 loaders")]),s._v(" "),t("ul",[t("li",[s._v("配置方式（更推荐）：在 webpack.config.js 文件中指定")]),s._v(" "),t("li",[s._v("内联方式：使用 import 语句明确指定")])]),s._v(" "),t("h3",{attrs:{id:"_1-配置方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-配置方式"}},[s._v("#")]),s._v(" 1. 配置方式")]),s._v(" "),t("p",[t("code",[s._v("module.rule")]),s._v(" 指定 loaders 的配置项目")]),s._v(" "),t("ul",[t("li",[s._v("它使用简洁的方式展示 loaders，让我们对每个 loader 有一个概览")]),s._v(" "),t("li",[s._v("loaders 的执行顺序从右到左，下面的例子中，"),t("code",[s._v(".css")]),s._v(" 文件先经过 sass-loader 处理，然后是 css-loader，最后是 style-loader")])]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.css$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            options"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n              modules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sass-loader'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])])]),t("h3",{attrs:{id:"_2-内联方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-内联方式"}},[s._v("#")]),s._v(" 2. 内联方式")]),s._v(" "),t("p",[s._v("我们可以使用 "),t("code",[s._v("import")]),s._v(" 语句或者其他等价的 importing 方法来指明 loaders")]),s._v(" "),t("ul",[t("li",[s._v("通过 "),t("code",[s._v("!")]),s._v(" 来将资源和 loaders 分隔，每个部分只于当前目录相关")])]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Styles "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader!css-loader?modules!./styles.css'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("这种方式可以让我们在 "),t("code",[s._v("import")]),s._v(" 语句使用简单的前缀来重写任何 loaders、preLoaders 和 postLoaders")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("!")]),s._v(" 前缀将禁用所有配置的 normal loaders")]),s._v(" "),t("li",[t("code",[s._v("!!")]),s._v(" 前缀将禁用所有配置的 loaders（preLoaders、loaders、postLoaders）")]),s._v(" "),t("li",[t("code",[s._v("-!")]),s._v(" 前缀将禁用所有配置的 preLoaders 和 loaders，不包括 postLoaders")])]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Styles "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'!style-loader!css-loader?modules!./styles.css'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Styles "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'!!style-loader!css-loader?modules!./styles.css'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Styles "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-!style-loader!css-loader?modules!./styles.css'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("options 的传递方式可以是 query parameter —— "),t("code",[s._v("?key=value&foo=bar")]),s._v("，也可以是 JSON object —— "),t("code",[s._v('?{"key":"value","foo":"bar"}')])]),s._v(" "),t("h2",{attrs:{id:"三、loader-特性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、loader-特性"}},[s._v("#")]),s._v(" 三、Loader 特性")]),s._v(" "),t("ul",[t("li",[s._v("Loaders 可以像链条一样串起来用，每个在链条中的 loader 都将自己的转换作用于资源上。第一个 loader 传递自己处理过后的结果给下一个，一个接着一个，最后 webpack 等待着链条中最后一个 loader 返回出的 JavaScript")]),s._v(" "),t("li",[s._v("Loaders 可以是异步的，也可以是同步的")]),s._v(" "),t("li",[s._v("Loaders 运行于 Node.js，所以它能做很多事情")]),s._v(" "),t("li",[s._v("Loaders 是可配置的，通过 options 对象即可（"),t("code",[s._v("query")]),s._v(" 的方式被废弃了）")]),s._v(" "),t("li",[s._v("除了 package.json 中的 main，normal modules 可以通过 loader field 导出一个 loader")]),s._v(" "),t("li",[s._v("插件可以给 loaders 更多的特性")]),s._v(" "),t("li",[s._v("Loaders 可以触发其他任意的文件")])]),s._v(" "),t("p",[s._v("Loaders 提供了一种方式来自定义输出通过他们的预处理函数。用户对逻辑的颗粒度有了更多的自由度例如压缩、打包、语言翻译和"),t("a",{attrs:{href:"https://webpack.js.org/loaders/",target:"_blank",rel:"noopener noreferrer"}},[s._v("更多"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"四、解析-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、解析-loader"}},[s._v("#")]),s._v(" 四、解析 Loader")]),s._v(" "),t("p",[s._v("Loaders 遵循模块解析标准，在大多数情况下它从 module path（"),t("code",[s._v("npm install")]),s._v("，"),t("code",[s._v("node_modules")]),s._v("）中被加载")]),s._v(" "),t("ul",[t("li",[s._v("一个 loader 模块期望输出一个函数，这个函数是 Node.js 兼容的 JavaScript")]),s._v(" "),t("li",[s._v("它们通常使用 npm 来管理")]),s._v(" "),t("li",[s._v("按照一般惯例，loaders 通常命名为 xxx-loader")])]),s._v(" "),t("p",[t("em",[s._v("「@浪里淘沙的小法师」")])])])}),[],!1,null,null,null);a.default=r.exports}}]);