---
title: 域名和服务器
date: 2020/4/25 18:00:00
index_img: /img/basis.jpg
categories: 基础知识
---

域名和服务器的配置，内容包括域名、服务器。


最近被安利了一波，我的域名和服务器都是在阿里云上购买的。


阿里云官网：→ [_点击这里_](https://cn.aliyun.com/)

## 一、域名


### 1. 购买域名


找到「域名」，跟淘宝购物一样，先选择好域名，然后加入购物车购买。


进入域名控制台，可以看到自己购买的域名。


### 2. 配置 DNS


复制粘贴 IP 到 域名里

![](https://cdn.nlark.com/yuque/0/2020/png/916537/1587108392758-97ff8087-45c8-4f44-bdd8-67f515e9b830.png#align=left&display=inline&height=328&margin=%5Bobject%20Object%5D&originHeight=328&originWidth=1243&status=done&style=none&width=1243)

过一段时间可以使用 nslookup <域名> 查看域名是否生效了


```
nslookup <域名>
```


## 二、服务器


### 1. 购买服务器


找到「云服务器 ECS」，Elastic Compute Server（弹性计算服务器）。如果提示充值，就要提示要求充值。


1. 计费方式：按量计费
1. 地域：<选择国内的（选最优惠的）
1. 分类：入门级 → 选最优惠的
1. Ubuntu 18.04 64位
1. 带宽降到最低
1. 最后点击创建实例



进入 ECS 控制台，可以看到自己购买的服务器


### 2. 配置端口和重置实例密码


**设置安全组**


「实例列表」→「更多」→「网络和安全组」→「安全组配置」→「配置规则」→「添加安全组规则」→「端口：8888/8888」+ 「授权对象：0.0.0.0/0」


**重置实例密码**


「实例列表」→「更多」→「密码/密钥」→「重置实例密码」

**远程连接**

点击远程连接进入服务器，第一次进入会出现一次远程连接密码，把这个密码记下来。为了方便记得密码，把这个密码记录在实例的标签上。



### 3. 进入服务器配置 SSH Key


「实例列表」→「远程连接」→「操作系统用户名：<root>」+「密码：<实例密码>」

将公钥内容添加到 authorized_keys 中


```
echo "<公钥>" >> ~/.ssh/authorized_keys
```


做完这一步，就可以在自己电脑上通过 SSH Key 远程登录到服务器了

ssh root@<实例 ip>，实例 ip 记不住怎么办，把 ip 记录到 hosts 中

```
// hosts 文件

<实例 ip> aliyun
```


这样就在 Cmder 上登录和退出服务器，对我而言把 ip 记录到 hosts 的意义不大，因为当我关闭服务器后，这个 ip 会被回收，当下次再登录的时候 ip 地址会改变。


```
ssh root@aliyun
exit 或者 logout
```


### 4. 创建账户


最好不要一直使用 root 账户做操作，因为 root 账户权限太大，有可能发生不好的事情，这时候需要创建一个权限小一点的账户。


```
adduser eddiema
mkdir  /home/eddiema/.ssh
cp ~/.ssh/authorized_keys /home/eddiema/.ssh/
chmod 755 /home/eddiema/.ssh/authorized_keys
chown eddiema:eddiema /home/eddiema/.ssh/authorized_keys
```
### 
### 5. 给账户添加 sudo


在 root 账户下运行


```
adduser eddiema sudo
```


在 eddiema 账户下「以管理员什么运行」
```
sudo <命令>
```


### 6. 安装软件


安装 node.js


```
curl -sL https://deb.nodesource.com/setup_8.x | sudo bash -
sudo sed -i 's/deb.nodesource.com\/node_8.x/mirrors.tuna.tsinghua.edu.cn\/nodesource\/deb_8.x/g' /etc/apt/sources.list.d/nodesource.list
sudo apt-get update
sudo apt-get install -y nodejs
node -v
npm -v
npx -v
```


安装 git
```
sudo apt install git
git --version
```


### 5. 防止 SSH 卡住


在本地机器运行以下命令（注：不是在远程服务器）


```
echo "Host *" >> /etc/ssh/ssh_config
echo "  ServerAliveInterval 30" >> /etc/ssh/ssh_config
```


_「@浪里淘沙的小法师」_
